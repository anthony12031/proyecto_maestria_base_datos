cluster name = universidad_replica_ciencias_3;

node 1 admin conninfo = 'dbname=universidad host=192.168.43.70 user=postgres password=juegosxbox';
node 2 admin conninfo = 'dbname=universidad host=192.168.43.90 user=postgres password=juegosxbox';

init cluster (id = 2, comment = 'nodo maestro ciencias_educacion');

#se crea el set donde se guardaran las inscripciones y notas
create set (id = 2, origin = 2, comment = 'replicacion de tablas');

#replicar notas
set add table (set id = 2, origin = 2, id = 1, fully qualified name = 'ciencias_educacion.inscribe', comment = 'inscribe table');

#se especifica cual nodo sera el esclavo (en este caso el id 3 medio ambiente)
store node (id = 1, comment = 'nodo esclavo ciencias', EVENT NODE = 2);

#se especifica que el esclavo puede comunicarse con el maestro y viceversa
store path (server = 1, client = 2, conninfo='dbname=universidad host=192.168.43.70 user=postgres password=juegosxbox');
store path (server = 2, client = 1, conninfo='dbname=universidad host=192.168.43.90 user=postgres password=juegosxbox');

#se especifica que se esta escuchando por si se produce algun cambio en la(s) tablas se genere un evento de escritura
store listen (origin=1, provider=1 , receiver=2);
store listen (origin=2, provider=2 , receiver=1);
